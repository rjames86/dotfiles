## Dropbox Aliases
alias dev="cd ~/src"
alias ss="cd ~/src/support_server"
alias ssa="cd ~/src/support_server_alt"
alias dbc="cd ~/src/support_server; PYTHONPATH=. ipython -i console.py"
alias pp="PYTHONPATH=."
alias ppss="PYTHONPATH=~/src/support_server /usr/bin/python"
alias cdc="cd ~/src/server/commandcenter"

alias gfr="git fetch && git rebase"
alias v="vagrant"

alias lrt="ssh -N -L 3000:127.0.0.1:8082 172.16.30.182"

_complete_ec_commands ()
{
    COMPREPLY=()
    cur="${COMP_WORDS[COMP_CWORD]}"
    read -d '\n' commands << EOF
        prep-system
        self-update
        mount
        umount
        status
        start
        stop
        update
        rebuild
        config
EOF
    COMPREPLY=( $(compgen -W "${comp_ssh_hosts}" -- $cur))
    return 0
}
complete -F _complete_ec_commands ec

_arc ()
{
  CUR="${COMP_WORDS[COMP_CWORD]}"
  COMPREPLY=()
  OPTS=$(echo | arc shell-complete --current ${COMP_CWORD} -- ${COMP_WORDS[@]})

  if [ $? -ne 0 ]; then
    return $?
  fi

  if [ "$OPTS" = "FILE" ]; then
    COMPREPLY=( $(compgen -f -- ${CUR}) )
    return 0
  fi

  if [ "$OPTS" = "ARGUMENT" ]; then
    return 0
  fi

  COMPREPLY=( $(compgen -W "${OPTS}" -- ${CUR}) )
}
complete -F _arc -o filenames arc

function crev {
         REV=$(git rev-parse HEAD)
         echo "Copying rev $REV"
         echo $REV | pbcopy
}
